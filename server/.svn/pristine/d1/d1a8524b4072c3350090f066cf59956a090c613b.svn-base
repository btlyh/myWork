package com.cambrian.dfhm.skill;

import java.util.ArrayList;

import com.cambrian.common.net.ByteBuffer;
import com.cambrian.dfhm.battle.BattleCard;

/**
 * 类说明：连击
 * @author：Sebastian
 * 
 */
public class AttacksSkill extends Skill{

	/* static fields */

	/* static methods */

	/* fields */
	/** 连续攻击次数 */
	private int count;
	/** 每次攻击伤害数 */
	private int hurt;
	/** 回合数 */
	private int round;
	/** 技能发动率 */
	private int rate;

	/* constructors */

	/* properties */

	/* init start */

	/* methods */
	@Override
	public ArrayList<Integer> skillValue(BattleCard attCard, int[] aim, BattleCard[] aimList, ArrayList<Integer> record) {
		System.err.println("攻击者att ==="+attCard.getAtt());
		System.err.println("技能单次伤害值 ==="+hurt);
		super.clearDieIndex();
		for (int i = 0; i < count; i++) {
			hurt += attCard.getAtt() * hurt / 1000;
		}
		BattleCard aimCard;
		boolean die = false;
		for (int i = 0; i < aim.length; i++) {
			aimCard = aimList[aim[i]];
			die = aimCard.decrHp(hurt);
			record.add(aimCard.getIndex());
			record.add(hurt);
			if(die)
			{
				record.add(1);
				super.addDieIndex(aimCard.getIndex());
			}
			else
				record.add(-1);
			System.err.println("连击技能，照成伤害对象==="+aimCard.getName()+"血量损失 ==="+hurt+", 剩余血量 ==="+aimCard.getCurHp());
		}		
		return super.getDieIndex();
	}
	
	@Override
	public boolean buffValue(BattleCard aimCard) {
		round --;
		return false;
	}
}
