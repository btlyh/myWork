package com.cambrian.dfhm.instancing.entity;

import com.cambrian.common.object.Sample;
import com.cambrian.dfhm.battle.BattleCard;
import com.cambrian.dfhm.card.Card;
import com.cambrian.dfhm.common.Player;

/**
 * 类说明：
 * 
 * @author：LazyBear
 */
public abstract class NPC extends Sample
{

	/* static fields */
	/** 副本类型 1主线 2挑战 3穿越（日常） 4活动 */
	public static final int NORMAL=1,HARD=2,CROSS=3,ACTIVITY=4;
	/** NPC是BOSS */
	public static final int BOSS=1;
	/* static methods */

	/* fields */
	/** NPC中的怪物卡牌 */
	private int[] battleCardList;
	/** NPC的位置 */
	private int index;
	/** 挑战此NPC所需军令 */
	private int needToken;
	/** 是否为BOSS战 1是 0否 */
	private int isBoss;
	/** 下一个NPC的位置 如果为0表示最高副本 */
	private int nextIndex;
	/** 出战卡牌列表 */
	private BattleCard[] monsters;
	/** NPC类型(相当于副本类型) */
	private int type;

	/* constructors */

	/* properties */
	public int[] getBattleCardList()
	{
		return battleCardList;
	}

	public void setBattleCardList(int[] battleCardList)
	{
		this.battleCardList=battleCardList;
		initMonsters();
	}

	public int getIndex()
	{
		return index;
	}

	public void setIndex(int index)
	{
		this.index=index;
	}

	public int getNeedToken()
	{
		return needToken;
	}

	public void setNeedToken(int needToken)
	{
		this.needToken=needToken;
	}

	public int getIsBoss()
	{
		return isBoss;
	}

	public void setIsBoss(int isBoss)
	{
		this.isBoss=isBoss;
	}

	public int getNextIndex()
	{
		return nextIndex;
	}

	public void setNextIndex(int nextIndex)
	{
		this.nextIndex=nextIndex;
	}

	public BattleCard[] getMonsters()
	{
		return monsters;
	}

	public void setMonsters(BattleCard[] monsters)
	{
		this.monsters=monsters;
	}
	public int getType()
	{
		return type;
	}
	public void setType(int type)
	{
		this.type=type;
	}
	/* init start */

	/* methods */
	private void initMonsters()
	{
		monsters=new BattleCard[battleCardList.length];
		for(int i=0;i<monsters.length;i++)
		{
			Card card=(Card)Sample.factory.getSample(battleCardList[i]);
			BattleCard battleCard=new BattleCard(card.getId(),
				card.getName(),card.getAvatar(),card.getTinyAvatar(),
				card.getLevel(),card.getAtt(),card.getSkillRate(),
				card.getDoubleSkill(),card.getAttRange(),card.getSkillId(),
				card.getMaxHp(),card.getCurHp(),i,card.getAimType(),
				card.getCritRate(),card.getDodgeRate(),0,i);
			monsters[i]=battleCard;
		}
	}
	/** 攻击NPC之前的检测 */
	public abstract String checkAttNpc(Player player,AttRecord checkRecord);
	/** 攻击胜利之后NPC的处理 */
	public abstract void handleForWin(Player player);
	/** 攻击之后的处理*/
	public abstract void handleForAtt(Player player);
}
